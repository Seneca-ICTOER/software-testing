<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="icon" href="/img/pwa/icon-512x512.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#DA291C">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#DA291C">
<link rel="apple-touch-icon" href="/img/pwa/icon-192x192.png">
<link rel="mask-icon" href="/img/pwa/icon-512x512.png" color="#DA291C">
<meta name="msapplication-TileImage" content="/img/pwa/icon-512x512.png">
<meta name="msapplication-TileColor" content="#DA291C"><title data-react-helmet="true">Debugging On Linux | Software Testing</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://software-testing.sdds.ca/D-Debugging/debug-linux-5"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Debugging On Linux | Software Testing"><meta data-react-helmet="true" name="description" content="Debugging on Linux."><meta data-react-helmet="true" property="og:description" content="Debugging on Linux."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://software-testing.sdds.ca/D-Debugging/debug-linux-5"><link data-react-helmet="true" rel="alternate" href="https://software-testing.sdds.ca/D-Debugging/debug-linux-5" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://software-testing.sdds.ca/D-Debugging/debug-linux-5" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.5ebce48d.css">
<link rel="preload" href="/assets/js/runtime~main.3d6cd9d5.js" as="script">
<link rel="preload" href="/assets/js/main.f2fe67bb.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Seneca College" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo-dark.svg" alt="Seneca College" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Software Testing</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Table of Contents</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Test Data Selection</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Unit Testing</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Debugging</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/D-Debugging/debugging-techniques-1">Debugging Techniques</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/D-Debugging/vs-debugging-2">Visual Studio Debugging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/D-Debugging/other-tools-3">Other Debugging Tools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/D-Debugging/other-langs-4">Debugging Other Languages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/D-Debugging/debug-linux-5">Debugging On Linux</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/D-Debugging/debug-web-6">Debugging On Web Browsers</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Software Development Life Cycle</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Quality Assurance</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="theme-doc-markdown markdown"><header><h1>Debugging on Linux</h1></header><p>On Linux the most common way to debug is to use the GNU debugger, <strong>gdb</strong>. This is part of the GNU compiler suite and works well with <strong>gcc</strong> and <strong>g++</strong>. This is a command line debugger which means that you control it via textual commands rather than using buttons as you do with the Visual Studio debugger. Other than the difference in how commands are issued, the use of the debugger is similar. Let&#x27;s say we have the following C program which has an obvious bug in it.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI c"><pre tabindex="0" class="prism-code language-c codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">  #include </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">stdio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">  #define MAX_SIZE </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token number" style="color:#36acaa">5</span><span class="token plain">  </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">function1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">v</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> size</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token number" style="color:#36acaa">6</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token number" style="color:#36acaa">7</span><span class="token plain">          </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token number" style="color:#36acaa">9</span><span class="token plain">          </span><span class="token keyword" style="color:#00009f">for</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> size</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">10</span><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">                  v</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">12</span><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">13</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">14</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">15</span><span class="token plain">  </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">16</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">17</span><span class="token plain">          </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> vals</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">MAX_SIZE</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">18</span><span class="token plain">          </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">19</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">20</span><span class="token plain">          </span><span class="token function" style="color:#d73a49">function1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">vals</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">21</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">22</span><span class="token plain">          </span><span class="token keyword" style="color:#00009f">for</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> MAX_SIZE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;%d &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> vals</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">23</span><span class="token plain">          </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">24</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The following will show an example of using gdb. Please note that the output might be slightly different on your system due to different versions of Linux and the GNU tools. This was captured from Ubuntu running under Windows Subsystem Linux. We will start by running the program above.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">rob@DESKTOP-AKDPEIV:~$ ./broken1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0 1 2 3 4 5 6 7 8 9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*** stack smashing detected ***: terminated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Aborted (core dumped)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Well, that did not work well. So, the question is, where did it go wrong? To find out, we need to use the debugger. Before we do that, we need to make sure that debugging symbols have been included in the binary executable. These is additional information that the compiler adds that allows the debugger to know what the variable names are as well as where lines begin and the text of the lines. Without this additional information, everything will be printed as hexadecimal addresses, which is just about impossible to read. To include the debugging information, you must compile with the <code>-g</code> flag as shown below.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">gcc -Wall -g -o broken1 broken1.c</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>We start debugging with:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">rob@DESKTOP-AKDPEIV:~$ gdb broken1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GNU gdb (Ubuntu 9.1-0ubuntu1) 9.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Copyright (C) 2020 Free Software Foundation, Inc.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">This is free software: you are free to change and redistribute it.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">There is NO WARRANTY, to the extent permitted by law.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Type &quot;show copying&quot; and &quot;show warranty&quot; for details.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">This GDB was configured as &quot;x86_64-linux-gnu&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Type &quot;show configuration&quot; for configuration details.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For bug reporting instructions, please see:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;http://www.gnu.org/software/gdb/bugs/&gt;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Find the GDB manual and other documentation resources online at:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;http://www.gnu.org/software/gdb/documentation/&gt;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For help, type &quot;help&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Type &quot;apropos word&quot; to search for commands related to &quot;word&quot;...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Reading symbols from broken1...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This starts the debugging session and stops before the program starts to execute. It gives a <code>(gdb)</code> prompt which is where we can enter commands for the debugger. Let&#x27;s say we just want to run the program and let it fail, to see where it is failing.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Starting program: /home/rob/broken1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0 1 2 3 4 5 6 7 8 9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*** stack smashing detected ***: terminated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Program received signal SIGABRT, Aborted.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">__GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:50</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">50      ../sysdeps/unix/sysv/linux/raise.c: No such file or directory.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#0  __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:50</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#1  0x00007fffff5d5859 in __GI_abort () at abort.c:79</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#2  0x00007fffff6403ee in __libc_message (action=action@entry=do_abort,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt=fmt@entry=0x7fffff76a07c &quot;*** %s ***: terminated\n&quot;) at ../sysdeps/posix/libc_fatal.c:155</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#3  0x00007fffff6e29ba in __GI___fortify_fail (msg=msg@entry=0x7fffff76a064 &quot;stack smashing detected&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at fortify_fail.c:26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#4  0x00007fffff6e2986 in __stack_chk_fail () at stack_chk_fail.c:24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#5  0x0000000008001270 in main () at broken1.c:24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The output above shows that we typed <code>run</code> to begin executing the program. The program failed as expected and said it failed in a system call while raising a signal. This is not very helpful so we use the <code>where</code> command to ask it where the program is stopped. This produces the stack trace shown that tells us that it was on line 24 of main when it check to see if the stack was OK and found it had been corrupted.</p><p>This is not very useful information and we need to investigate further to find out where the program failed. To do this, we can set a breakpoint and run the program again.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) break broken1.c:9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Breakpoint 1 at 0x8001198: file broken1.c, line 9.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The program being debugged has been started already.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Start it from the beginning? (y or n) y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Starting program: /home/rob/broken1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Breakpoint 1, function1 (v=0x7ffffffee490, size=15) at broken1.c:9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">9               for(i = 0; i &lt; size; i++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) print i</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$1 = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) step</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11                      v[i] = i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) step</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">9               for(i = 0; i &lt; size; i++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) print i</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$2 = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) step</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11                      v[i] = i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) print i</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$3 = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The output above shows how we can set a breakpoint by typing <code>break broken1.c:9</code> where we specify the file to break at and the line number. We then restart the program and it runs until it hits the breakpoint. At this point, we can use <code>print i</code> to print the value of the variable <strong>i</strong>. The <code>print</code> command allows use to display the values of the variables when the program is stopped at a breakpoint. We can get the debugger to execute the next line using the <code>step</code> command.</p><p>This process will eventually lead to an answer, but it is painfully slow. We take a guess that we might be running off the end of the array. To check this, we will insert a conditional breakpoint that will trigger only if the subscript goes out of range. This is shown below.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) break broken1.c:11 if i == 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Breakpoint 2 at 0x11a1: file broken1.c, line 11.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) info breakpoints</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Num     Type           Disp Enb Address            What</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1       breakpoint     keep y   0x0000000000001198 in function1 at broken1.c:9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2       breakpoint     keep y   0x00000000000011a1 in function1 at broken1.c:11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        stop only if i == 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) delete 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Starting program: /home/rob/broken1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Breakpoint 2, function1 (v=0x7ffffffee490, size=15) at broken1.c:11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11                      v[i] = i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb) print i</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$1 = 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(gdb)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>We can create a conditional breakpoint by adding a condition onto the end of a breakpoint <code>break broken1.c:11 if i == 10</code> which will break only if the value of i becomes 10. Then, we need to delete the original breakpoint. To do this, we use <code>info breakpoints</code> to display all breakpoints and then <code>delete 1</code> to delete breakpoint 1. Then, we run the program and it breaks where we expected. To make sure the subscript is out of range, we print it and we now know that we have run off the end of the array.</p><p>This is a short example of how to use gdb. The <code>help</code> command in gdb will display a list of commands but the table below shows the most useful commands.</p><table><thead><tr><th align="left">Command</th><th align="left">Explanation</th></tr></thead><tbody><tr><td align="left">break <em>location</em></td><td align="left">Sets a breakpoint at the location. The location could be a file:line or it could be the name of a function (eg. break function1).</td></tr><tr><td align="left">continue</td><td align="left">Resume execution and stop at the next breakpoint or when the program ends.</td></tr><tr><td align="left">delete <em>breaknum</em></td><td align="left">Delete the indicated breakpoint. The numbers come from info breakpoint.</td></tr><tr><td align="left">info breakpoints</td><td align="left">Displays a list of active breakpoints along with numbers which can be used to delete them.</td></tr><tr><td align="left">finish</td><td align="left">Continues execution until the end of the current function and then breaks.</td></tr><tr><td align="left">print <em>var</em></td><td align="left">Display the value of the provided variable or expression.</td></tr><tr><td align="left">step</td><td align="left">Execute the current line and stop before the next line is executed.</td></tr><tr><td align="left">watch <em>var</em></td><td align="left">The program whenever the value of the variable is changed and print out the old and new value of the variable.</td></tr><tr><td align="left">where</td><td align="left">Display a stack trace showing you where you are in the program.</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Seneca-ICTOER/software-testing/tree/main/docs/D-Debugging/debug-linux-5.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/D-Debugging/other-langs-4"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Debugging Other Languages</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/D-Debugging/debug-web-6"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Debugging On Web Browsers<!-- --> Â»</div></a></div></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Software Testing</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/">Contents</a></li><li class="footer__item"><a href="#" id="pwa-button" class="footer__link-item" hidden>Install as an App</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Seneca College.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.3d6cd9d5.js"></script>
<script src="/assets/js/main.f2fe67bb.js"></script>
</body>
</html>